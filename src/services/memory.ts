'use server';

import { createServerClient } from "@/lib/supabase/server";

/**
 * Saves a user's chat input and the AI's response to your database.
 * @param chatInput The original message from the user.
 * @param response The response generated by the AI.
 * @param userId The ID of the user.
 */
export async function saveToTrainingMemory(chatInput: string, response: string, userId?: string): Promise<void> {
    const supabase = createServerClient();
    const { error } = await supabase
      .from('training_memory')
      .insert([
        { user_id: userId, chat_input: chatInput, response: response },
      ]);
    
    if (error) {
      console.error("Error saving to training memory:", error);
    }
}
